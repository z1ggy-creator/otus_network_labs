# Underlay сеть на ISIS  

---

## 1. План работ  

### Настройка Underlay сети  
- [ ] Настройка интерфейсов (порт, IP, MTU)  
- [ ] Настройка ISIS  
- [ ] Настройка BFD 
- [ ] Проверка смежности ISIS  

### Тестирование и проверка  
- [ ] Проверка связности между всеми узлами  
- [ ] Проверка таблиц маршрутизации  

---

## 2. Адресное пространство  

### 2.1. Loopback интерфейсы  
**Формат:** `10.255.255.X/32`  

| Устройство | IP-адрес       |
|------------|----------------|
| Spine-1    | 10.255.255.1/32  |
| Spine-2    | 10.255.255.2/32  |
| Leaf-1     | 10.255.255.11/32 |
| Leaf-2     | 10.255.255.12/32 |
| Leaf-3     | 10.255.255.13/32 |

### 2.2. Point-to-Point линки  
**Подсеть:** `10.0.0.0/24`  
**Маска:** `/31`  

| Соединение        | Подсеть       | Устройство | IP-адрес     |
|-------------------|---------------|------------|--------------|
| Spine-1 ↔ Leaf-1  | 10.0.0.0/31   | Spine-1    | 10.0.0.0/31  |
|                   |               | Leaf-1     | 10.0.0.1/31  |
| Spine-1 ↔ Leaf-2  | 10.0.0.2/31   | Spine-1    | 10.0.0.2/31  |
|                   |               | Leaf-2     | 10.0.0.3/31  |
| Spine-1 ↔ Leaf-3  | 10.0.0.4/31   | Spine-1    | 10.0.0.4/31  |
|                   |               | Leaf-3     | 10.0.0.5/31  |
| Spine-2 ↔ Leaf-1  | 10.0.0.6/31   | Spine-2    | 10.0.0.6/31  |
|                   |               | Leaf-1     | 10.0.0.7/31  |
| Spine-2 ↔ Leaf-2  | 10.0.0.8/31   | Spine-2    | 10.0.0.8/31  |
|                   |               | Leaf-2     | 10.0.0.9/31  |
| Spine-2 ↔ Leaf-3  | 10.0.0.10/31  | Spine-2    | 10.0.0.10/31 |
|                   |               | Leaf-3     | 10.0.0.11/31 |

---

## 3. Схема Underlay сети на ISIS  

### 3.1. Топология  

![Topology_lab01.png](Topology_lab01.png)

### 3.2. Параметры ISIS  

#### Общие настройки:  
- **ISIS Process:** `UNDERLAY`  
- **NET Address:** `49.0001.<device-id>.00`  
- **Уровень:** Level-2 только  
- **Метрика:** Ширина (wide) метрика  
- **Hello-таймеры:**  
  - Hello-interval: `3 сек`  
  - Hold-time: `9 сек`  

#### NET адреса по устройствам:  
| Устройство | NET адрес         |
|------------|-------------------|
| Spine-1    | 49.0102.5525.5001.00   |
| Spine-2    | 49.0102.5525.5002.00   |
| Leaf-1     | 49.0102.5525.5011.00   |
| Leaf-2     | 49.0102.5525.5012.00   |
| Leaf-3     | 49.0102.5525.5013.00   |

#### Настройки интерфейсов:  
- **Тип интерфейса:** Point-to-Point  
- **MTU:** `9214` (для поддержки overlay)  
- **BFD:** Включен 

### 3.3. Таблица интерфейсов  

| Устройство | Интерфейс | Назначение | IP адрес       | ISIS настройки          |
|------------|-----------|------------|----------------|-------------------------|
| **Spine-1**| Eth1/1    | К Leaf-1   | 10.0.0.0/31    | ISIS ptp, metric 10     |
|            | Eth1/2    | К Leaf-2   | 10.0.0.2/31    | ISIS ptp, metric 10     |
|            | Eth1/3    | К Leaf-3   | 10.0.0.4/31    | ISIS ptp, metric 10     |
|            | Lo0       | Loopback   | 10.255.255.1/32| Passive, metric 1       |
| **Spine-2**| Eth1/1    | К Leaf-1   | 10.0.0.6/31    | ISIS ptp, metric 10     |
|            | Eth1/2    | К Leaf-2   | 10.0.0.8/31    | ISIS ptp, metric 10     |
|            | Eth1/3    | К Leaf-3   | 10.0.0.10/31   | ISIS ptp, metric 10     |
|            | Lo0       | Loopback   | 10.255.255.2/32| Passive, metric 1       |
| **Leaf-1** | Eth1/1    | К Spine-1  | 10.0.0.1/31    | ISIS ptp, metric 10     |
|            | Eth1/2    | К Spine-2  | 10.0.0.7/31    | ISIS ptp, metric 10     |
|            | Lo0       | Loopback   | 10.255.255.11/32| Passive, metric 1      |
| **Leaf-2** | Eth1/1    | К Spine-1  | 10.0.0.3/31    | ISIS ptp, metric 10     |
|            | Eth1/2    | К Spine-2  | 10.0.0.9/31    | ISIS ptp, metric 10     |
|            | Lo0       | Loopback   | 10.255.255.12/32| Passive, metric 1      |
| **Leaf-3** | Eth1/1    | К Spine-1  | 10.0.0.5/31    | ISIS ptp, metric 10     |
|            | Eth1/2    | К Spine-2  | 10.0.0.11/31   | ISIS ptp, metric 10     |
|            | Lo0       | Loopback   | 10.255.255.13/32| Passive, metric 1      |